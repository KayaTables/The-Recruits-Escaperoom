var initDropDowns=function(){var s=function(e){if(this!=document||a&&!a.contains(e.target)){if(a){if(a.contains(this))return t(this),hasClass(this,"dropdown")?removeClass(this,"dropdown"):(addClass(this,"dropdown"),n(this)),void e.stopPropagation();if(t(),this==a||this==document)return void(a=null)}a=this,addClass(this,"dropdown"),n(this)}},t=function(t){[t||a].concat(Selector(".dropdown",a)).forEach(function(e){e&&e!=t&&removeClass(e,"dropdown")})},i=[function(e){if(hasClass(e.parentNode,"profileNavigation")){var t,i=getById("menubar"),s=120;i&&(t=getOffsetLeft(e)-getOffsetLeft(i)+e.offsetWidth,s=i.offsetWidth-t),toggleClass(e,"left",s<120)}},function(e){if(hasClass(e,"product")){var t=Selector("ul",e)[0];t&&(t.style.left=parseInt(e.offsetWidth)-130+"px")}}],n=function(e){for(var t=i.length;t--;)i[t](e)},a=null;return function(e,t){var i=Selector(e,t);return i.length&&(i.forEach(function(e){addEvent(e,"click",s)}),addEvent(document,"click",s)),i}}();function RefreshTimer(){return RefreshTimer.instance?RefreshTimer.instance:this instanceof RefreshTimer?(this.timer=null,this.counter=0,this.lastActivity=0,this.refreshes={},this.inactiveTrigger=600,this.bgThrottle=5,this.paused=!1,this.suspended=!1,void(this.documentHidden=!1)):RefreshTimer.instance=new RefreshTimer}function Poll(e){this.pollId=e,this.init()}Object.extend(RefreshTimer.prototype,{add:function(e,t,i,s){return this.refreshes[e]={callback:t,interval:i,allowBg:!!s,paused:!1,lastExecution:this.counter},null===this.timer&&(addEvent(document,"visibilitychange",this.checkVisibility.bind(this)),addEvent(window,"mousemove",this.stayActive.bind(this)),addEvent(window,"focus",this.stayActive.bind(this)),this.start()),this.refreshes[e]},checkVisibility:function(){var e=Browser.prefixed("hidden",document);e&&(this.documentHidden=!!document[e],this.documentHidden?this.suspend():this.resume())},remove:function(e){this.has(e)&&delete this.refreshes[e]},has:function(e){return e in this.refreshes},stayActive:function(){this.documentHidden||(this.lastActivity=this.counter,this.suspended&&!this.paused&&this.resume())},start:function(){clearTimeout(this.timer),this.timer=setTimeout(this.execute.bind(this),1e3)},suspend:function(){this.suspended=!0},pause:function(e){e?this.has(e)&&(this.refreshes[e].paused=!0):this.paused=!0},resume:function(e){e?this.has(e)&&(this.refreshes[e].paused=!1):(this.suspended=!1,this.paused=!1,this.start())},execute:function(){var e,t,i;if(this.counter++,!this.paused)for(e in!this.suspended&&this.counter-this.lastActivity>this.inactiveTrigger&&this.suspend(),this.refreshes)(t=this.refreshes[e]).paused||this.suspended&&!t.allowBg||(i=t.interval*(this.documentHidden?this.bgThrottle:1),t.lastExecution+i<=this.counter&&(t.callback(),t.lastExecution=this.counter));this.start()}}),Object.extend(Poll.prototype,{init:function(){if(this.pollForm=getById("poll"+this.pollId),this.pollForm)for(var e,t,i=this.pollForm.getElementsByTagName("label"),s=0;e=i[s++];)e.htmlFor&&(t=getById(e.htmlFor))&&(t.disabled||addEvent(t,"click",this.optionSelect.bind(this)),t.checked&&addClass(e,"selected"))},optionSelect:function(e){var t=Ajax.sendRequest(getXmlHttpUrl("frontpage","poll","vote","PollID="+this.pollId),{method:"POST",appendSid:!0},getQueryString(this.pollForm));return t?this.showVotes(t):this.pollForm.submit(),e&&e.preventDefault(),!1},getVotes:function(){var e=Ajax.sendRequest(getXmlHttpUrl("frontpage","poll","show","PollID="+this.pollId),{nocache:!0});e&&this.showVotes(e)},showVotes:function(e){for(var t=this.pollForm.parentNode,i=this.pollForm.nextSibling;i;){if("P"==i.nodeName){i.parentNode.removeChild(i);break}i=i.nextSibling}t.removeChild(this.pollForm);var s,n=document.createElement("div");for(n.innerHTML=e;s=n.firstChild;)t.appendChild(s);this.init()}}),window.PopupGenerator&&(PopupGenerator.register("moreItems",{offsetLeft:-13,offsetTop:-1,handlers:{click:1},arrow:"top",getContent:function(e){var t=Selector("div.moreItems",e.offsetElement.parentNode)[0];return!!t&&t.innerHTML},setPosition:function(e){e.setAutoPosition(e.offsetElement.parentNode),e.arrow.style.left=e.offsetElement.offsetLeft+e.offsetElement.offsetWidth/2+"px"}}),PopupGenerator.register("dmNotificationsPopup",{className:"menuHeaderPopup scrollableList",offsetLeft:-336,offsetTop:37,handlers:{click:1},useParent:!0,forceUpdate:!0,getContent:function(e){return!e.visible&&(RefreshTimer().pause("notificationRefresh"),this.sendRequest(e))},sendRequest:function(e){return Ajax.sendRequest(getXmlHttpUrl("frontpage","dm","get_popup"),{method:"POST",type:"json",async:!0,nocache:!0,appendSid:!0,handler:this.handleResponse.bind(this,e)}),e.getLoadingMessage("De berichten worden geladen...")},afterShow:function(e){addClass(e.offsetElement,"selected")},handleResponse:function(e,t){var i=checkJsonResponse(t);if(i&&"html"in i){e.element.innerHTML=i.html;var s=Selector(".notifications",e.element)[0];if(s){Scrollable.create(s,{fadeShowMore:1}),NotificationMarker.enableIcons(Selector(".notification",s));var n=Selector(".markAllRead",e.element)[0];n&&addEvent(n,"click",this.markAllRead.bind(this,e))}this.addWebPushInfo&&this.addWebPushInfo(e)}},onClose:function(e){removeClass(e.offsetElement,"selected"),RefreshTimer().resume("notificationRefresh")},markAllRead:function(e,t){var i=getById("newNotificationsCount");i&&(removeClass(i.parentNode,"unread"),i.innerHTML="0"),Selector(".notification.unread").forEach(function(e){removeClass(e,"unread")}),Ajax.sendRequest(location.protocol+"//"+location.host+"/ajax/notificatie/markallread/",{method:"POST",type:"json",async:!0,nocache:!0,appendSid:!0,strictSidCheck:!0}),t.preventDefault()}}),PopupGenerator.register("userNotificationsPopup",Object.extend({sendRequest:function(e){return Ajax.sendRequest(getXmlHttpUrl("frontpage","notifications","get_popup"),{method:"POST",type:"json",async:!0,appendSid:!0,nocache:!0,handler:this.handleResponse.bind(this,e)}),e.getLoadingMessage("De notificaties worden geladen...")},addWebPushInfo:function(e){if(window.WebPush){var t=getById("webPushContainer");t||((t=document.createElement("div")).id="webPushContainer",t.className="footer",e.element.insertBefore(t,Selector(".footer",e.element)[0]));var i=new FancyToggleSwitch({checked:!WebPush.isPushEnabled(),onclick:WebPush.toggleWebPush},"on"),s="",n=jsConfig.get("TnetBaseURL");WebPush.isPushProxyFailed()?s='Je browser ondersteunt pushnotificaties, maar niet op subdomeinen. Bezoek een willekeurige pagina op <a href="'+n+'">tweakers.net</a> om pushnotificaties te activeren.':WebPush.isPushSupported()?WebPush.isPushAvailable()||(s="Je hebt in je huidige browser pushnotificaties geblokkeerd."):s="Je huidige browser ondersteunt geen pushnotificaties.",t.innerHTML="",t.appendChild(HTMLBuilder().built({n:"p",c:[i.element,{t:"Ontvang pushnotificaties in de browser"}]})),s&&t.appendChild(HTMLBuilder().built({n:"p",a:{className:"bar warning"},h:s}))}}},PopupGenerator.exists("dmNotificationsPopup"))),PopupGenerator.register("displayOptions",{className:"menuHeaderPopup",offsetLeft:-230,offsetTop:32,handlers:{click:1},menuElement:null,countryCode:"",countryCodeElement:null,automaticLayoutElement:null,densityElement:null,backgroundElement:null,headerPreset:null,headerElement:null,gradePreset:null,gradeElement:null,densitySlider:null,backgroundSlider:null,forceUpdate:!0,reload:!1,additionalSettings:{},registerAdditionalSettingsForm:function(e,t){this.additionalSettings[e]=t},getContent:function(e){if(hasClass(e.offsetElement.parentNode,"selected"))return!1;if(e.initialized)return!0;var t=[];for(var i in this.additionalSettings)t.push("additionalSettings%5B%5D="+i);return this.menuElement=e.offsetElement,this.countryCode=this.menuElement.getAttribute("data-country"),Ajax.sendRequest(getXmlHttpUrl("frontpage","displayOptions","get_popup",t.join("&")),{type:"json",async:!0,nocache:!0,handler:this.loadContent.bind(this,e)}),e.getLoadingMessage("De instellingen worden geladen...")},loadContent:function(e,t){var i,s,n,a;if(e.contentArea.className="quickSettingsContent",e.setContent(t.html),e.initContent(),i=getById("countryCodeForm"))for(this.countryCodeElement=i.elements.countryCode,a=0;n=this.countryCodeElement[a++];)addEvent(n,"change",this.save.bind(this));if(i=getById("displayOptionsForm")){for(s=i.elements,a=0;n=s[a++];)if(("INPUT"===n.nodeName||"SELECT"===n.nodeName)&&"hidden"!==n.type)switch(addEvent(n,"change",this.save.bind(this)),n.name){case"automatic":this.automaticLayoutElement=n,addEvent(n,"change",function(){this.backgroundSlider.setDisabled(this.automaticLayoutElement.checked),this.automaticLayoutElement.checked&&(this.backgroundElement.value=e.offsetElement.getAttribute("data-autocolor"),this.backgroundSlider.update())}.bind(this));break;case"header":n.checked&&(this.headerPreset=n.value);break;case"ForceResponsiveGrade":this.gradeElement=n,this.gradePreset=n.value}this.headerElement=i.elements.header,this.initializeSliders(i)}for(var o in this.additionalSettings)this.additionalSettings[o].initialize&&this.additionalSettings[o].initialize();e.initialized=!0},initializeSliders:function(e){this.densityElement=e.elements.density,"SELECT"===this.densityElement.nodeName&&(this.densityElement.onchange=this.handleDensityChange.bind(this),this.densitySlider=new Slider({minSelect:this.densityElement,noLabels:1,showLower:0,tickLabelPadding:0,width:210,beforeNode:this.densityElement})),this.backgroundElement=e.elements.background,this.backgroundElement.onchange=this.save.bind(this),this.backgroundSlider=new Slider({minSelect:this.backgroundElement,onChange:this.setBackgroundColor.bind(this),noLabels:1,showLower:0,tickLabelPadding:14,width:210,beforeNode:this.backgroundElement})},setBackgroundColor:function(e){DisplayOptions.setBackgroundColor(this.backgroundElement.options[e].value)},getCurrentDensity:function(){return getSelectedValue(this.densityElement)},getCurrentBackground:function(){return getSelectedValue(this.backgroundElement)},getCurrentHeader:function(){return getSelectedValue(this.headerElement)},getCurrentGrade:function(){return getSelectedValue(this.gradeElement)},getCurrentCountrycode:function(){return getSelectedValue(this.countryCodeElement)},handleDensityChange:function(){DisplayOptions.setDensity(this.getCurrentDensity()),this.save()},afterShow:function(e){for(var t in addClass(e.offsetElement.parentNode,"selected"),this.additionalSettings)"onShow"in this.additionalSettings[t]&&this.additionalSettings[t].onShow()},onClose:function(e){for(var t in removeClass(e.offsetElement.parentNode,"selected"),this.additionalSettings)"onClose"in this.additionalSettings[t]&&this.additionalSettings[t].onClose()},save:function(){if(this.countryCode!=getSelectedValue(this.countryCodeElement)||this.gradePreset!=getSelectedValue(this.gradeElement)||this.headerPreset!=getSelectedValue(this.headerElement)){this.reload=!0;var e=getById("countryCodeForm");if(e){e.parentNode.style.opacity=.1;var t=document.createElement("div");t.className="reloadText",t.innerHTML='<img src="'+jsConfig.get("ImgURL")+'g/if/icons/throbber.gif"> <span>De pagina wordt herladen...</span>',e.parentNode.parentNode.appendChild(t)}}Ajax.sendRequest(getXmlHttpUrl("frontpage","displayOptions","save"),{method:"POST",async:!0,appendSid:!0,handler:this.handleSave.bind(this)},"density="+this.getCurrentDensity()+"&background="+this.getCurrentBackground()+"&automatic="+(this.automaticLayoutElement.checked?1:0)+"&header="+this.getCurrentHeader()+"&ForceResponsiveGrade="+this.getCurrentGrade()+"&countryCode="+this.getCurrentCountrycode()),this.bgTimer&&(clearTimeout(this.bgTimer),this.bgTimer=null)},handleSave:function(e){this.reload&&"success"===e&&location.reload(!0)}}),PopupGenerator.register("socialPopup",{offsetLeft:10,offsetTop:-17,handlers:{click:1},arrow:"left",forceUpdate:!0,getContent:function(e,t){return e.visible?(t.preventDefault(),!1):getById("shareButtonContent")}}),PopupGenerator.register("karmaPopup",{offsetLeft:20,offsetTop:-17,handlers:{click:1},arrow:"left",forceUpdate:!0,getContent:function(e,t){return Ajax.sendRequest(getXmlHttpUrl("tweakbase","topKarmaUsers")+"&itemIdentifier="+e.offsetElement.getAttribute("data-itemidentifier")+"&userId="+e.offsetElement.getAttribute("data-userid"),{type:"json",async:!0,nocache:!0,handler:this.showContent.bind(this,e)}),e.getLoadingMessage("")},showContent:function(e,t){var i=checkJsonResponse(t);i&&e.setContent(i)}}),PopupGenerator.register("newbiePopup",{offsetLeft:15,offsetTop:-21,handlers:{click:1},arrow:"left",getContent:function(e,t){return'<div class="popupInfo"><h3>Newbie</h3><p>Newbie is een nieuwe status binnen Tweakers en heeft enkel betrekking op reviews. De status benadrukt dat de review is geschreven door een beginnende reviewer. Dit zegt verder niks over de kwaliteit van de review.</p><p>Newbie af? Newbie is ook een aanmoediging voor de gebruiker. De status is dan ook niet definitief en verdwijnt na verloop van tijd door verhoogde activiteit. Post een comment op een artikel, schrijf nog een review of meng je in een discussie op het forum. Voor je het weet ben je newbie af en ga je op voor karmakoning.</p></div>'}}),PopupGenerator.register("testPanelPopup",{offsetLeft:15,offsetTop:-21,handlers:{click:1},arrow:"left",getContent:function(e,t){return'<div class="popupInfo"><h3>Tweakers Testpanel</h3><p>Voor het Tweakers Testpanel worden reviews ge√Ønitieerd door de fabrikant en uitgevoerd door de community. De fabrikant stelt het product beschikbaar, maar het is aan de reviewer om te oordelen: onafhankelijke reviews voor en door Tweakers.</p><p>Voor het <a href="https://tweakers.net/info/faq/pricewatch#testpanel">Tweakers Testpanel</a> zijn we constant op zoek naar users die graag de nieuwste producten testen.</p></div>'}}));var NotificationMarker=function(){var l=".notificationType",h="markeergelezen",t=function(e,i){e.forEach(function(e){var t=Selector(i,e)[0];t&&(t.onclick=s)})},s=function(e){var t=TreeWalker(this).parentNode(".notification");if(t){var i=d(t),s=a(t)?"markeerongelezen":h;Ajax.sendRequest(location.protocol+"//"+location.host+"/ajax/notificatie/"+s+"/"+i+"/",{method:"POST",type:"json",async:!0,nocache:!0,appendSid:!0,handler:n.bind(this,t,s)}),e&&(e.stopPropagation(),e.preventDefault())}},n=function(e,t,i){if(i){var s=d(e),n=t==h;Selector(".notification").forEach(function(e){if(d(e)==s){toggleClass(e,"unread",!n);var t=Selector(l,e)[0];t&&(t.title=n?"Markeer als ongelezen":"Markeer als gelezen")}});var a=Selector("#notifications")[0];if(a){var o=Selector(".unread",a);0===o.length?(hasClass(a.parentNode,"notificationsContainer")&&(a=a.parentNode),a.parentNode.removeChild(a)):toggleClass(a,"multiple",1<o.length)}if(!c(s)){var r=NotificationNotifier.getCurrentCount("newNotificationsCount")+(n?-1:1);NotificationNotifier.updateUnreadCounts({newNotificationsCount:r})}}},d=function(e){return e.getAttribute("data-notification-id")},c=function(e){return 0==e.indexOf("b:")},a=function(e){return!hasClass(e,"unread")},e=function(e){t(e,l)};return{initBroadcastList:function(){t(Selector("#notifications .notification"),".close")},initNotificationsPage:function(){e(Selector(".notificationList .notification.markable"))},enableIcons:e}}(),FixedHeader=function(){var s,n=null,a=0,e=function(){var e=o(),t=!0;if(e<=s.parentNode.offsetTop)r();else if(e>s.offsetTop&&e<=250)addClass(document.body,"visibleHeader");else if(e<=a)n||(n=setTimeout(l.bind(this,e),50)),t=!1;else{addClass(s,"hide"),removeClass(document.body,"visibleHeader");var i=["displayOptions"];window.Responsive&&Responsive.getCurrentDeviceGrade()==Responsive.gradeXS||i.push("dmNotificationsPopup","userNotificationsPopup","selectedProductsPopup"),i.forEach(function(e){PopupGenerator.closePopup(e)})}a=e,t&&h()},o=function(){return window.pageYOffset||document.documentElement.scrollTop},r=function(){removeClass(s,"hide"),removeClass(document.body,"visibleHeader")},l=function(e){50<e-o()&&(removeClass(s,"hide"),addClass(document.body,"visibleHeader")),h()},h=function(){clearTimeout(n),n=null};return{init:function(){s||hasClass(document.body,"fixedHeader")&&(s=getById("menubar"))&&addEvent(window,"scroll",e)},remove:function(){s&&(r(),removeEvent(window,"scroll",e),s=null)}}}(),DisplayOptions={currentColorValue:null,appliedColorValue:null,bgTimer:null,setBackgroundColor:function(e){this.currentColorValue=e,this.bgTimer||this._applyBackgroundColor()},setDensity:function(e){if(!e||!e.match(/(cozy|compact|normal)/))throw"Illegal density";var t,i,s=document.head.getElementsByTagName("link"),n=0,a="normal";for("normal"!=e&&loadCSS("framework/framework_"+e+".css?"+Date.now());t=s[n++];)t.href&&(i=t.href.match(/\/framework_(cozy|compact)\.css/))&&(t.disabled||(a=i[1]),i[1]==e?t.disabled&&(t.disabled=!1):t.disabled=!0);return a},_applyBackgroundColor:function(){if(this.currentColorValue==this.appliedColorValue)return clearTimeout(this.bgTimer),void(this.bgTimer=null);var e,t,i=parseInt(this.currentColorValue,10);if(255==i)removeClass(document.body,"customColor");else{addClass(document.body,"customColor");t=createStylesheet("customCss.css?"+Math.random(),"#contentArea{border:1px solid}"+["body","#bottom div.hr","#entity","#heroBlock","#searchbar",".galleryHeadingContainer",".pageTabsContainer",".notificationsContainer"].join(",")+"{background-color:rgb("+[i-1,i,i].join(",")+")}"+["#contentArea","#top","#mainSearch","#entity>div","#toc.fixed .reviewToc .tocContent",".entityHeader .thumb",".galleryHeading .thumb",".pageTabs li",".pageTabs .more > ul"].join(",")+"{border-color:rgb("+[i-31,i-30,i-30].join(",")+")}"+["#mainSearch:hover"].join(",")+"{border-color:rgb("+[i-63,i-62,i-62].join(",")+")}")}(e=getById("customBgCss"))&&e.parentNode.removeChild(e),t&&(t.id="customBgCss"),this.appliedColorValue=this.currentColorValue,this.bgTimer=setTimeout(this._applyBackgroundColor.bind(this),50)}},Tracker={tracker:null,elements:null,settingsHtml:null,defaultMaxTrackerSize:20,drag:null,dy:0,sy:0,EV_START:null,EV_MOVE:null,EV_END:null,refreshRate:60,updateScrollableTimer:null,fixedSupport:!0,layoutOffsetTop:0,relativeHeaderOffset:45,initialized:!1,init:function(){this.tracker=getById("tracker"),this.fixedSupport=!Browser.is.mobile,this.initialFixed=this.isFixed(),this.refresh()},initOffsets:function(){var e=getById("menuwrapper");e&&(this.relativeHeaderOffset=e.offsetHeight);var t=getById("top");t&&(this.layoutOffsetTop=t.offsetTop,this.tracker.style.top=this.layoutOffsetTop+"px")},initContent:function(){this.initOffsets(),this.fixedSupport||addClass(document.body,"trackerScroll");var e=HTMLBuilder().built({n:"div",a:{className:"fakeTop"},c:[{n:"div",a:{className:"toggleVisibility",onclick:this.toggleVisibility.bind(this)},c:[{n:"div",a:{className:"corner"}}]}]});this.tracker.appendChild(e);var t=[];if(jsConfig.get("UserID")&&t.push({n:"li",a:{id:"trackerSettingsLink"},c:{n:"span",a:{onclick:this.switchSettingsVisibility.bind(this)},t:"Instellingen"}}),this.fixedSupport){t.push({n:"li",a:{id:"trackerFixedLink"},c:{n:"span",a:{onclick:this.toggleFixed.bind(this)},t:this.getFixedLabel()}});var i=document.createElement("div");i.id="trackerStretch",this.tracker.parentNode.insertBefore(i,this.tracker)}t.push({n:"li",a:{id:"trackerPositionLink"},c:{n:"span",a:{onclick:this.togglePosition.bind(this)},t:this.getPositionLabel()}});var s=HTMLBuilder().built({n:"div",a:{id:"trackerContainer"},c:[{n:"div",a:{id:"trackerHeader"},c:[{n:"span",a:{className:"trackerIcon"}},{n:"h4",a:{id:"trackerTitle"},t:"Tracker"},{n:"ul",a:{className:"bulletSeparatedList"},c:t}]},{n:"div",a:{id:"trackerContentContainer"},c:{n:"div",a:{id:"trackerContent"}}}]});this.tracker.appendChild(s),this.elements=HTMLBuilder().getIdList(),addEvent(window,"scroll",this.scrollHandler.bind(this,200)),addEvent(window,"resize",this.scrollHandler.bind(this,200)),addEvent(this.elements.trackerContentContainer,"mouseenter",this.pauseRefresh.bind(this)),addEvent(this.elements.trackerContentContainer,"mouseleave",this.resumeRefresh.bind(this)),this.initialized=!0},buildTrackerSettings:function(){var e=Ajax.sendRequest(getXmlHttpUrl("frontpage","tracker","get_settings"),{method:"POST",type:"json",nocache:!0,appendSid:!0,handler:checkJsonResponse});if(e&&"settings"in e){var t,i,s=[];for(t in s.push({n:"tr",c:[{n:"th",t:"Type"},{n:"th",a:{colSpan:3},t:"Aantal items"}]}),e.settings)"aantal"in(i=e.settings[t])&&s.push({n:"tr",a:{id:"tr_"+t},c:[{n:"td",a:{className:"settingsLabel"},t:i.caption||t.ucFirst()},{n:"td",a:{className:"lessItems"},c:{n:"span",a:{className:"fancyButton moreless",onclick:this.updateSettingsNr.bind(this,"showtracker_"+t,-1)},t:"-"}},{n:"td",a:{className:"nrItems"},c:{n:"input",a:{type:"text",id:"showtracker_"+t,name:"showtracker_"+t,value:i.aantal||0,onfocus:this.settingFocus.bind(this,!0),onblur:this.settingFocus.bind(this,!1)}}},{n:"td",a:{className:"addItems"},c:{n:"span",a:{className:"fancyButton moreless",onclick:this.updateSettingsNr.bind(this,"showtracker_"+t,1)},t:"+"}}]});return HTMLBuilder().built({n:"div",a:{id:"trackerSettings"},c:[{n:"p",t:"Wijzig de volgorde met drag & drop."},{n:"form",a:{id:"trackerSettingsForm"},c:[{n:"table",a:{cellpadding:0},c:s},{n:"div",a:{className:"buttonBlock"},c:[{n:"input",a:{type:"button",className:"save fancyButton",value:"Opslaan",onclick:this.saveSettings.bind(this)}},{n:"input",a:{type:"button",className:"reset fancyButton",value:"Annuleren",onclick:this.resetSettings.bind(this)}}]}]}]})}return null},switchSettingsVisibility:function(){var e=this.elements.trackerSettingsLink.firstChild,t=this.elements.trackerTitle;this.settingsHtml?(e.innerHTML="Instellingen",t.innerHTML="Tracker",removeClass(t.parentNode,"settings"),this.elements.trackerContent.style.display="block",removeEvent(this.settingsHtml,"mousedown",this.EV_START),this.settingsHtml.parentNode.removeChild(this.settingsHtml),this.settingsHtml=this.EV_START=null):(this.settingsHtml=this.buildTrackerSettings(),this.settingsHtml&&(this.elements.trackerContentContainer.appendChild(this.settingsHtml),this.EV_START=addEvent(this.settingsHtml,"mousedown",this.dragStart.bind(this),!0),e.innerHTML="Terug naar tracker",t.innerHTML="Instellingen",addClass(t.parentNode,"settings"),this.settingsHtml.style.display="block",this.elements.trackerContent.style.display="none")),this.updateScrollable(!0)},updateSettingsNr:function(e,t){var i=getById(e);i&&(i.value=Math.min(this.defaultMaxTrackerSize,Math.max(parseInt(i.value,10)+t,0)))},settingFocus:function(e,t){for(var i=t&&(t.target||t.srcElement);i;){if("TR"==i.nodeName){toggleClass(i,"focussed",e);break}i=i.parentNode}},resetSettings:function(e){e&&stopPropagation(e),this.switchSettingsVisibility()},saveSettings:function(e){e&&stopPropagation(e);var t=Ajax.sendRequest(getXmlHttpUrl("frontpage","tracker","save_settings"),{method:"POST",type:"json",appendSid:!0,handler:checkJsonResponse},getQueryString(document.forms.trackerSettingsForm));t&&("html"in t&&(this.elements.trackerContent.innerHTML=t.html),this.switchSettingsVisibility())},dragStart:function(e){if(!this.drag){for(var t=e.target;t&&"TR"!=t.nodeName;){if("TD"==t.nodeName&&"settingsLabel"!=t.className)return;t=t.parentElement}if(t&&t.id){e.preventDefault(),this.drag=t,addClass(t,"dragging"),addClass(this.settingsHtml,"drag");var i=this.isFixed()?0:getPageDimensions().offsetY;this.dy=getOffsetTop(t)-i,this.sy=e.clientY,this.EV_MOVE=addEvent(this.settingsHtml,"mousemove",this.dragDo.bind(this),!0),this.EV_END=addEvent(document,"mouseup",this.dragStop.bind(this),!0),this.settingsHtml.setAttribute("unselectable","on"),this.settingsHtml.onselectstart=cancelEvent}}},dragDo:function(e){if(this.drag){e.preventDefault();var t=e.clientY,i=this.drag.offsetHeight;t-this.dy>i?(el=this.drag.nextSibling,el&&el.id&&(this.drag.parentNode.insertBefore(this.drag,el.nextSibling),this.dy+=i,this.sy=t)):t-this.dy<0&&(el=this.drag.previousSibling,el&&el.id&&(this.drag.parentNode.insertBefore(this.drag,el),this.dy-=i,this.sy=t))}},dragStop:function(){this.drag&&(removeClass(this.drag,"dragging"),removeClass(this.settingsHtml,"drag"),removeEvent(this.settingsHtml,"mousemove",this.EV_MOVE),removeEvent(document,"mouseup",this.EV_END),this.settingsHtml.removeAttribute("unselectable"),this.settingsHtml.onselectstart=null,this.drag=this.EV_MOVE=this.EV_END=null)},isVisible:function(){return hasClass(document.body,"trackerVisible")},isFixed:function(){return!hasClass(document.body,"trackerScroll")},getPosition:function(){return hasClass(document.body,"trackerRight")?"r":"l"},toggleVisibility:function(){this.settingsHtml&&this.switchSettingsVisibility(),"l"==this.getPosition()&&addClass(document.body,"slideTracker"),toggleClass(document.body,"trackerVisible"),this.saveOptions(),this.scrollHandler(),this.refresh(),this.isVisible()&&window.scrollBy&&window.scrollBy(document.documentElement.clientWidth*("r"==this.getPosition()?1:-1),0),setTimeout(this.afterToggle,"l"==this.getPosition()?700:0)},afterToggle:function(){removeClass(document.body,"slideTracker"),window.dispatchEvent(new Event("resize"))},toggleFixed:function(){toggleClass(document.body,"trackerScroll"),this.saveOptions(),this.elements.trackerFixedLink.firstChild.innerHTML=this.getFixedLabel(),this.scrollHandler()},togglePosition:function(){toggleClass(document.body,"trackerRight"),this.saveOptions(),this.elements.trackerPositionLink.firstChild.innerHTML=this.getPositionLabel(),this.scrollHandler()},getPositionLabel:function(){return"r"==this.getPosition()?"Links":"Rechts"},getFixedLabel:function(){return this.isFixed()?"Scroll":"Fixeer"},scrollHandler:function(e){var t="",i=this.isFixed(),s=this.isVisible();if(i){var n=getPageDimensions(),a=hasClass(document.body,"fixedHeader")?0:this.relativeHeaderOffset;if(t+="top:"+-Math.min(Math.max(0,n.offsetY)-this.layoutOffsetTop,a)+"px;","r"==this.getPosition())t+="right:"+(n.availWidth-n.scrollWidth+n.offsetX)+"px;";else if(0<n.offsetX){var o=-n.offsetX;s||(o-=this.tracker.offsetWidth-6),t+="left:"+o+"px;"}}else t+="top:"+this.layoutOffsetTop+"px;";this.tracker.style.cssText=t,s&&(clearTimeout(this.updateScrollableTimer),this.updateScrollableTimer=setTimeout(this.updateScrollable.bind(this,1==e),e||10))},updateScrollable:function(e){var t,i,s=this.elements.trackerContentContainer;this.isFixed()?(t=document.documentElement.clientHeight-getOffsetTop(s)-20,(e||t!=parseInt(s.style.height))&&(s.style.height=t+"px",Scrollable.create(s,{lightcolor:1}))):(Scrollable.destroy(s),s.style.height="",(i=getById("layout"))&&(t=Math.max(0,s.clientHeight-60))!=parseInt(i.style.minHeight)&&(i.style.minHeight=t+"px"))},refresh:function(){this.tracker&&"none"!=this.tracker.style.display&&(this.initialized||this.initContent(),this.isVisible()?this.resumeRefresh():this.pauseRefresh())},pauseRefresh:function(){RefreshTimer().pause("trackerRefresh")},resumeRefresh:function(){var e=RefreshTimer();if(e.has("trackerRefresh"))e.resume("trackerRefresh");else{e.add("trackerRefresh",this.refreshAll.bind(this),this.refreshRate);var t=!0,i=Browser.supports("sessionStorage")&&sessionStorage.getItem("trackerCache");i&&"html"in(i=JSON.parse(i))&&Date.now()-i.timestamp<1e3*this.refreshRate&&(this.handleRefresh(t,{data:{html:i.html,fromCache:!0}}),t=!1),setTimeout(this.refreshAll.bind(this,t),t?1:1e4)}},refreshAll:function(e){addClass(this.elements.trackerHeader,"updating"),Ajax.sendRequest(getXmlHttpUrl("frontpage","tracker","get_tracker"),{type:"json",async:!0,nocache:!0,handler:this.handleRefresh.bind(this,e)})},handleRefresh:function(e,t){var i=checkJsonResponse(t);i&&"html"in i&&(this.elements.trackerContent.innerHTML=i.html,!i.fromCache&&Browser.supports("sessionStorage")&&sessionStorage.setItem("trackerCache",JSON.stringify({timestamp:Date.now(),html:i.html}))),removeClass(this.elements.trackerHeader,"updating"),this.scrollHandler(e?1:10)},saveOptions:function(){var e=this.fixedSupport?this.isFixed():this.initialFixed;Ajax.sendRequest(getXmlHttpUrl("frontpage","tracker","save_options"),{method:"POST",async:!0,appendSid:!0},"position="+this.getPosition()+"&fixed="+(e?1:0)+"&visible="+(this.isVisible()?1:0))}},NotificationNotifier=function(){var i="totalNotificationsCount",e=function(){Ajax.sendRequest(getXmlHttpUrl("frontpage","notifications","get_notification_unread_counts"),{method:"POST",type:"json",async:!0,nocache:!0,appendSid:!0,handler:function(e){e&&"data"in e&&t(e.data)}})},l=function(e,t){e.innerHTML=t,toggleClass(e.parentNode,"unread",0<t)},t=function(t){var e;Selector(".newNotificationsCount").forEach(function(e){e.id&&e.id!=i&&(e.id in t?l(e,t[e.id]):t[e.id]=e.innerHTML)}),(e=getById(i))&&function(e,t){var i,s,n=0,a=0,o=0,r=Selector(".rightSidebarToggle")[0];for(i in t)s=parseInt(t[i])||0,i.contains("Notifications")?a+=s:i.contains("CompareItem")&&(o+=s),n+=s;l(e,n),r&&(a?addClass(r,"highlight"):o||removeClass(r,"highlight"))}(e,t)};return{init:function(){RefreshTimer().add("notificationRefresh",e,60)},updateUnreadCounts:t,getCurrentCount:function(e){var t=getById(e);return t&&parseInt(t.innerHTML,10)||0}}}();function SearchSuggest(e,t){this.searchType=e,this.form=document.forms[t||"mainSearch"],this.input=this.form&&this.form.elements.keyword,this.currentValue="",this.ajaxUrl=getXmlHttpUrl("sitewidesearch","search",e),this.ajaxBusy=!1,this.ajaxTimer=null,this.executionCallbacks=[],this.additionalParameterCallback=null,this.overlay=null,this.popup=null,this.popupConfig={offsetLeft:0,offsetTop:30},this.input&&(this.input.setAttribute("autocomplete","off"),this.input.onkeyup=this.keyHandler.bind(this))}function Slider(e){this.options=e,this.element=null,this.slider=null,this.clearDiv=null,this.minSelect=null,this.maxSelect=null,this.sliderMin=null,this.sliderMax=null,this.sliderPointerWidth=17,this.maxTicks=6,this.disabled=!1,this.min=0,this.max=0,this.step=0,this.valueMin=0,this.valueMax=0,this.showLower=0,this.showHigher=0,this.lowValue=null,this.highValue=null,this.initialized=!1,this.resizeTimer=null,this.drag=null,this.cx=0,this.sx=0,this.x=0,this.maxX=0,this.EV_MOVE=null,this.EV_END=null,this.init()}function sliderInputWrapper(e,t){this.nodeName="SELECT",this.input=getById(e),this.options=t,this.selectedIndex=0,this.setSelectedIndex=function(e){this.selectedIndex=e,this.input.value=(this.options[this.selectedIndex]||{value:""}).value},this.update=function(){this.selectedIndex=findClosestOptionValue(this.options,this.input.value,/^a|a$/.test(this.input.name))},this.onchange=function(){(this.input.onkeyup||isNaN)()}}function findClosestOptionValue(e,t,i){for(var s=e.length,n=parseFloat(t);s--;)if(e[s].value===t)return s;if(""===t||isNaN(n))return i?e.length-1:0;for(s=e.length;s--;)if(parseFloat(e[s].value)<n)return i&&s+1<e.length&&s++,s;return i?e.length-1:0}function FancyToggleSwitch(e,t,i){this.checkbox=e,this.type=t,this.selectName=i,this.element=null,this.init()}Object.extend(SearchSuggest.prototype,{getValue:function(){return this.input.value.trim().normalizeDiacritics().toLowerCase()},initResultContainer:function(){!this.popup&&window.PopupGenerator&&(PopupGenerator.register("mainSearchSuggest",this.popupConfig),this.popup=PopupGenerator.get("mainSearchSuggest"),this.overlay=document.createElement("div"),this.overlay.className="overlay",this.popup.setContent('<div style="height:442px"></div>')),this.popup&&(this.popup.show(this.input),addClass(this.popup.contentArea,"opaque"),this.popup.contentArea.appendChild(this.overlay),this.overlay.style.height=this.popup.contentArea.clientHeight+"px",this.overlay.style.display="block")},destroyResultContainer:function(){this.popup&&this.popup.close(!0)},keyHandler:function(e){this.clearAjaxTimer();var t=this.getValue();1<t.length&&this.handleExecutionCallbacks(e)?t!=this.currentValue&&this.executeSearch(t):(this.currentValue=t,this.destroyResultContainer())},executeSearch:function(e){this.initResultContainer(),this.ajaxTimer=setTimeout(this.sendAjaxRequest.bind(this,e),200)},handleExecutionCallbacks:function(e){for(var t,i=0;t=this.executionCallbacks[i++];)if(!t(e))return!1;return!0},clearAjaxTimer:function(){clearTimeout(this.ajaxTimer),this.ajaxTimer=null},sendAjaxRequest:function(e){if(this.ajaxBusy)this.keyHandler();else{this.ajaxStartCallback(),this.ajaxBusy=!0;var t=this.additionalParameterCallback?this.additionalParameterCallback():"";Ajax.sendRequest(this.ajaxUrl+"&keyword="+encodeURIComponent(e)+t,{type:"json",async:!0,appendCountry:!0,handler:this.handleResult.bind(this,e)}),this.currentValue=e}},ajaxStartCallback:function(){},ajaxFinishCallback:function(){},handleResult:function(e,t){return this.ajaxBusy=!1,this.ajaxFinishCallback(),this.displayResult(e,t)},displayResult:function(e,t){if(this.popup){var i,s,n,a=[];if(!t||"message"in t||"error"in t||"errorMessage"in t)a.push('<p class="noResults">'+(t?t.message||t.error||t.errorMessage:"Geen resultaten gevonden")+"</p>");else{if("entities"in t&&t.entities.length){for("forum"!=this.searchType?a.push("<h4>Onderwerpen</h4>"):a.push("<h4>Fora</h4>"),a.push('<ul class="twk '+this.searchType+'">'),i=0;s=t.entities[i++];)a.push("<li>",this.createThumbHtml(s),'<p class="ellipsis"><a href="'+s.link+'" title="'+s.name+'">'+s.name+"</a></p>"),s.nrOfProducts&&a.push('<p class="moreContent"><a href="'+s.nrOfProductsLink+'">'+s.nrOfProducts+" product"+(1<s.nrOfProducts?"en":"")+"</a></p>"),s.nrOfArticles&&(n=1==s.nrOfArticles?t.singleitemtype||"artikel":t.itemtype||"artikelen",a.push('<p class="moreContent"><a href="'+s.nrOfArticlesLink+'">'+s.nrOfArticles+" "+n.toLowerCase()+"</a></p>")),(s.minPrice||s.rating)&&a.push('<p class="price">'+(s.rating||"")+" "+(s.minPrice||"")+"</p>"),a.push("</li>");a.push("</ul>")}if("articles"in t&&t.articles.length){for("userReview"==this.searchType?a.push("<h4>Kies het product waar je de review voor wilt schrijven</h4>"):a.push("<h4>"+(t.itemtype||"Artikelen")+"</h4>"),a.push('<ul class="'+this.searchType+'">'),i=0;s=t.articles[i++];)a.push("<li"+(s.label?' class="multiline"':"")+">",this.createThumbHtml(s),'<p class="ellipsis" title="'+s.name+'"><a href="'+s.link+'">'+s.name+"</a></p>"),s.label&&a.push('<p class="ellipsis" title="'+s.label.escapeHtml()+'"><a href="'+s.link+'"  style="text-decoration: underline;">'+s.label.escapeHtml()+"</a></p>"),a.push("</li>");a.push("</ul>")}"userReview"==this.searchType?a.push("<p>Het product niet gevonden? Verfijn je zoekopdracht voor meer resultaten</p>"):a.push('<p><a href="'+this.form.action+"?keyword="+encodeURIComponent(e)+'" class="readMore">Meer resultaten</a></p>')}if(this.popup.setContent(a.join("")),this.form.onsubmit){var o=this.trackSearch.bind(this);Selector("a",this.popup.contentArea).forEach(function(e){e.onclick=o})}this.popup.show(this.input),this.overlay&&(removeClass(this.popup.contentArea,"opaque"),this.overlay.style.display="none")}},createThumbHtml:function(e){if(!("thumbnail"in e))return"";var t,i="thumb micro "+e.type;return e.thumbnail?t='<img src="'+e.thumbnail+'" width=37 height=37>':(t="\x3c!-- no img --\x3e",i+=" empty"),'<div class="'+i+'"><a href="'+e.link+'">'+t+"</a></div>"},trackSearch:function(){this.form.onsubmit()},setDisabled:function(e){this.disabled=e},addExecutionCallback:function(e){this.executionCallbacks.push(e)},setAdditionalParameterCallback:function(e){this.additionalParameterCallback=e}}),Object.extend(Slider.prototype,{init:function(){if(this.options){this.element=document.createElement("div"),this.element.className="sliderControl"+(this.options.noLabels?" noLabels":""),this.element.onselectstart=cancelEvent,this.sliderArea=document.createElement("div"),this.sliderArea.className="sliderArea",this.element.appendChild(this.sliderArea),this.clearDiv=document.createElement("div"),this.clearDiv.style.clear="both",this.options.minSelect||this.options.maxSelect?(this.options.minSelect&&"SELECT"==this.options.minSelect.nodeName&&(this.options.minSelect.disabled&&(this.disabled=!0,addClass(this.element,"disabled")),"lowValue"in this.options?this.options.minSelect.value=this.options.lowValue:(this.minSelect=this.options.minSelect,this.minSelect.setSelectedIndex?this.minSelect.update():this.minSelect.setSelectedIndex=this.selectedIndexSetter,"highValue"in this.options&&(this.highValue=this.options.highValue),this.options.showLower&&(this.showLower=1),this.minSelect.options.length&&(this.min=this.showLower||""==this.minSelect.options[0].value?1:0,this.max=this.minSelect.options.length-1),this.options.valueMin=Math.max(this.minSelect.selectedIndex,this.min-this.showLower))),this.options.maxSelect&&"SELECT"==this.options.maxSelect.nodeName&&("highValue"in this.options?this.options.maxSelect.value=this.options.highValue:(this.maxSelect=this.options.maxSelect,this.maxSelect.setSelectedIndex?this.maxSelect.update():this.maxSelect.setSelectedIndex=this.selectedIndexSetter,"lowValue"in this.options&&(this.lowValue=this.options.lowValue),this.options.showHigher&&(this.showHigher=1),this.maxSelect.options.length&&(this.max=this.maxSelect.options.length-1-this.showHigher,this.minSelect?this.max+=this.showLower:(this.showLower=0,this.min=""==this.maxSelect.options[0].value?1:0)),this.options.valueMax=0<this.maxSelect.selectedIndex?this.maxSelect.selectedIndex+this.showLower:this.max+this.showHigher)),"step"in this.options&&null!=this.options.step||(this.options.step=1)):(this.min=parseInt(this.options.min||0,10),this.max=parseInt(this.options.max,10)),"step"in this.options?this.step=parseInt(this.options.step,10):this.step=Math.ceil((this.max-this.min)/10),this.options.maxTicks&&(this.maxTicks=parseInt(this.options.maxTicks,10)),this.sliderBar=document.createElement("div"),this.sliderBar.className="sliderBar",this.sliderArea.appendChild(this.sliderBar),this.sliderSelected=document.createElement("div"),this.sliderSelected.className="sliderBar selected",this.sliderBar.appendChild(this.sliderSelected),"valueMin"in this.options&&(this.valueMin=parseInt(this.options.valueMin,10),this.sliderMin=document.createElement("div"),this.sliderMin.className="sliderPointer",this.sliderBar.appendChild(this.sliderMin),this.options.noLabels||(this.sliderMinLabel=document.createElement("div"),this.sliderMinLabel.className="sliderLabel",this.sliderMinLabel.appendChild(document.createTextNode("")),this.sliderBar.appendChild(this.sliderMinLabel)),addEvent(this.sliderMin,"mousedown",this.sliderStart.bind(this,this.sliderMin),!0),this.sliderMin.ondragstart=cancelEvent),"valueMax"in this.options&&(this.valueMax=parseInt(this.options.valueMax,10),this.sliderMax=document.createElement("div"),this.sliderMax.className="sliderPointer",this.sliderBar.appendChild(this.sliderMax),this.options.noLabels||(this.sliderMaxLabel=document.createElement("div"),this.sliderMinLabel?(this.sliderMaxLabel.className="sliderSecondLabel",this.element.className+=" doubleLabel"):this.sliderMaxLabel.className="sliderLabel",this.sliderMaxLabel.appendChild(document.createTextNode("")),this.sliderBar.appendChild(this.sliderMaxLabel)),addEvent(this.sliderMax,"mousedown",this.sliderStart.bind(this,this.sliderMax),!0),this.sliderMax.ondragstart=cancelEvent);var e=(this.options.beforeNode||this.options).parentNode;e&&e.insertBefore(this.element,this.options.beforeNode||null),addEvent(this.sliderArea,"click",this.sliderClick.bind(this)),addCustomEvent(this.element,"resize",this.paint.bind(this)),this.options.width||addEvent(window,"resize",this.resizeHandler.bind(this)),this.paint()}},resizeHandler:function(){clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(this.paint.bind(this),100)},paint:function(e){var t=this.element.clientWidth-parseInt(computedStyle(this.element,"padding-left"))-parseInt(computedStyle(this.element,"padding-right"));if(this.initialized){if(null!=e&&e!=this.options.width)this.options.width=e;else if(this.options.width||t==parseInt(this.sliderArea.style.width))return;Selector(".sliderTick",this.element).forEach(function(e){e.parentNode.removeChild(e)})}e=this.options.width||t||180,this.sliderArea.style.width=e+"px",this.maxX=e-=this.sliderPointerWidth,this.showLower&&(e-=Math.floor(this.sliderPointerWidth/2)),this.showHigher&&(e-=Math.ceil(this.sliderPointerWidth/2));var i=Math.ceil((this.max-this.min)/this.step);this.tickWidth=e/i,this.sliderMin&&this.sliderMax&&this.options.rangeLabels?this.createLabels():this.createTicks(i),this.element.insertBefore(this.clearDiv,null),this.element.offsetWidth&&this.removeOverlappingTicks(),this.update()},update:function(){if(this.initialized=!1,this.minSelect&&(this.minSelect.update&&this.minSelect.update(),this.valueMin=Math.max(this.minSelect.selectedIndex,this.min-this.showLower)),this.maxSelect){this.maxSelect.update&&this.maxSelect.update();var e=this.minSelect&&!this.showLower||this.maxSelect.options[0]&&""===this.maxSelect.options[0].value?0:-1;this.valueMax=this.maxSelect.selectedIndex>e?this.maxSelect.selectedIndex+this.showLower:this.max+this.showHigher}this.sliderSnap(this.sliderMin,this.sliderMax),this.initialized=!0},createTicks:function(e){var t=1;if(e>this.maxTicks)for(var i=0,s=[2,3,5,7,11,13,17,19,23],n=e;n>this.maxTicks&&s[i]<=this.maxTicks;)n%s[i]?i++:(n/=s[i],t*=s[i]);e>this.maxTicks&&1==t&&(t=Math.ceil(e/(this.maxTicks-1)));var a,o,r,l,h,d,c,u=this.tickWidth*t,p=this.minSelect||this.maxSelect,m=Math.floor((this.showLower+1)*this.sliderPointerWidth/2),f=1,g=this.maxX+this.sliderPointerWidth-m;for(i=0;i<=e;i+=t){if((h=document.createElement("div")).className="sliderTick",0==i&&(h.style.marginLeft=m+"px"),g<f+(l=Math.round(i*this.tickWidth+u)-f)&&(l=g-f),f+=l,h.style.width=l+"px",r=o=this.min+i*this.step,d=document.createElement("span"),this.options.rangeLabels&&o in this.options.rangeLabels)r=this.options.rangeLabels[o];else{if(p){if(!(a=p.options[o]))continue;r=this.options.valueLabels?a.value in this.options.valueLabels?this.options.valueLabels[a.value]:"":a.text.trim()}l=r.length,this.options.noWordWrap||8<l&&1<(c=r.split(/\s+/)).length&&(l=0,c.forEach(function(e){l=Math.max(l,e.length)}),r=c.join("\n"),h.style.height=2+18*c.length+"px"),d.style.left=-3*l+"px"}d.innerHTML=r,addEvent(d,"click",this.sliderSet.bind(this,m+i*this.tickWidth)),h.appendChild(d),this.element.appendChild(h)}},createLabels:function(){var e=0,t=[0,0],i=0,s=document.createElement("div");s.className="sliderTick rangeLabel",s.style.marginLeft=this.sliderPointerWidth+"px",s.appendChild(document.createTextNode(" "));var n,a,o,r=0,l=0;for(e=0;e<this.options.rangeLabels.length;e++){if(a=this.options.rangeLabels[e],this.minSelect){for(;i<this.minSelect.options.length;i++)if(""!=this.minSelect.options[i].value&&this.minSelect.options[i].value==a[0]){for(t=[i,i];i<this.minSelect.options.length&&this.minSelect.options[i].value!=a[1];i++)t[1]++;break}}else t=a;l+=(t[1]-t[0])/this.step,n=s.cloneNode(!0),o=Math.round(l*this.tickWidth-r),n.style.width=o-7+"px",n.firstChild.nodeValue=a[2],r+=o,addEvent(n,"click",this.labelClick.bind(this,t[0],t[1])),this.element.appendChild(n),0==e&&(s.style.marginLeft=0)}s.className="sliderTick",s.firstChild.nodeValue=this.showHigher?String.fromCharCode(8734):"",this.element.appendChild(s.cloneNode(!0))},sliderStart:function(e,t){this.disabled||this.drag||(t.preventDefault(),this.cx=parseInt(e.style.left),this.sx=t.clientX,this.drag=e,this.EV_MOVE=addEvent(this.element,"mousemove",this.sliderMove.bind(this),!0),this.EV_STOP=addEvent(document,"mouseup",this.sliderStop.bind(this),!0))},sliderMove:function(e){if(this.drag){e.preventDefault();var t=this.cx-this.sx+e.clientX;t<0&&(t=0),t>this.maxX&&(t=this.maxX),this.drag.style.left=t+"px",this.drag==this.sliderMin?this.sliderMax&&t>parseInt(this.sliderMax.style.left)&&(this.sliderMax.style.left=t+"px",this.sliderOnChange(this.sliderMax)):this.sliderMin&&t<parseInt(this.sliderMin.style.left)&&(this.sliderMin.style.left=t+"px",this.sliderOnChange(this.sliderMin)),this.sliderOnChange(this.drag)}},sliderStop:function(e){this.drag&&(this.sliderSnap(this.sliderMin,this.sliderMax),removeEvent(this.element,"mousemove",this.EV_MOVE),removeEvent(document,"mouseup",this.EV_STOP),this.drag=this.EV_MOVE=this.EV_STOP=null)},sliderClick:function(e){var t=e.target||e.srcElement;if(this.disabled||this.drag||t==this.sliderMin||t==this.sliderMax)return e.preventDefault(),!1;for(var i=e.layerX||e.offsetX||0;t!=this.sliderArea;)i+=t.offsetLeft,t=t.parentNode;this.sliderSet(i)},sliderSet:function(e){if(!this.disabled){(e-=Math.floor(this.sliderPointerWidth/2))<0&&(e=0),e>this.maxX&&(e=this.maxX);var t=this.sliderMin||this.sliderMax;if(this.sliderMin&&this.sliderMax){var i=parseInt(this.sliderMin.style.left);if(i<e){var s=parseInt(this.sliderMax.style.left);(s<e||s-e<e-i)&&(t=this.sliderMax)}}t.style.left=e+"px",this.sliderOnChange(t,!0)}},labelClick:function(e,t){this.sliderMin&&(this.valueMin=e),this.sliderMax&&(this.valueMax=t),this.sliderSnap(this.sliderMin,this.sliderMax)},sliderSnap:function(){for(var e,t,i,s=0;s<arguments.length;s++)(e=arguments[s])&&(i=(t=e===this.sliderMin?this.valueMin:this.valueMax)<this.min?0:t>this.max?this.maxX:Math.round((t-this.min)/this.step*this.tickWidth)+Math.floor(this.showLower*this.sliderPointerWidth/2-1),e.style.left=i+"px");this.setSelection(),this.initialized&&(e=null,this.minSelect&&(e=this.minSelect,this.minSelect.setSelectedIndex(this.valueMin)),this.maxSelect&&(e=this.maxSelect,this.maxSelect.setSelectedIndex(this.valueMax-this.showLower)),e&&e.onchange&&e.onchange())},setSelection:function(){var e,t=0;(this.sliderMin||null!==this.lowValue)&&(this.sliderMin&&(t=parseInt(this.sliderMin.style.left)+Math.floor(this.sliderPointerWidth/2)),this.sliderMinLabel&&this.setLabel(this.sliderMinLabel,this.minSelect?this.minSelect.options[this.valueMin].text:this.valueMin,t)),this.sliderSelected&&(this.sliderSelected.style.left=t+"px"),this.sliderMax||null!==this.highValue?(e=this.sliderMax?parseInt(this.sliderMax.style.left)+Math.floor(this.sliderPointerWidth/2):this.maxX+this.sliderPointerWidth,this.sliderSelected&&(this.sliderSelected.style.width=Math.max(0,e-t)+"px"),this.sliderMaxLabel&&this.setLabel(this.sliderMaxLabel,this.maxSelect?this.maxSelect.options[this.valueMax-this.showLower].text:this.valueMax,e)):this.sliderSelected&&(e=this.maxX-parseInt(this.sliderSelected.style.left)+this.sliderPointerWidth,this.sliderSelected.style.width=e+"px"),this.options.onMove&&this.options.onMove(t,e),this.options.onChange&&this.options.onChange(this.valueMin,this.valueMax,t,e,this)},setLabel:function(e,t,i){e.firstChild.nodeValue=t;var s=Math.max(-8,Math.min(i-3*t.length-2,this.maxX+this.sliderPointerWidth-5*t.length+6));e.style.left=s+"px"},sliderOnChange:function(e,t){var i=this.min+(parseInt(e.style.left)-Math.floor(this.showLower*this.sliderPointerWidth/2))/this.tickWidth*this.step;e==this.sliderMin?(i=i<this.min?this.min-this.showLower*this.step:Math.round(i),this.sliderMax&&this.showHigher&&i>this.max&&(i=this.max,t=!0),this.valueMin=i):(i=i>this.max?this.max+this.showHigher*this.step:Math.round(i),this.sliderMin&&this.showLower&&i<this.min&&(i=this.min,t=!0),this.valueMax=i),t?this.sliderSnap(e):this.setSelection()},selectedIndexSetter:function(e){this.selectedIndex=e},setDisabled:function(e){this.disabled=!!e,this.disabled?addClass(this.element,"disabled"):removeClass(this.element,"disabled")},removeOverlappingTicks:function(){var s=0,n=this.options.tickLabelPadding||2;Selector("div.sliderTick",this.element).forEach(function(e){var t=e.firstChild,i=e.offsetLeft+t.offsetLeft;i<s||0==t.offsetWidth?t.style.display="none":s=i+t.offsetWidth+n})}}),Object.extend(FancyToggleSwitch.prototype,{init:function(e,t){var i={on:["aan","uit"],or:["of","en"],not:["wel","geen"]};this.element=HTMLBuilder().built({n:"div",a:{className:this.type+"Select toggleSwitch",onclick:this.toggle.bind(this),unselectable:"on"},c:[{n:"span",t:i[this.type][0]},{n:"span",t:i[this.type][1]}]}),this.update();var s=this.checkbox.parentNode;s&&(s.parentNode.insertBefore(this.element,s),s.style.display="none")},update:function(){toggleClass(this.element,"on",this.checkbox.checked)},toggle:function(){this.checkbox.checked=!this.checkbox.checked,this.update(),!this.checkbox.onclick||this.selectName&&!this.numChecked()||this.checkbox.onclick()},numChecked:function(){var e=this.checkbox.form.elements[this.selectName],t=1;if(e)for(e.length?t=e.length:e=[e];t--;)if(e[t].checked)return!0;return!1}});var LazyLoadImages=function(){var l=null,t=null,s=null,n=!1,i=function(e){var t,i=document.createElement("div");Selector("noscript.lazycontent",e).forEach(function(e){i.innerHTML=e.firstChild.nodeValue.replace(/\ssrc\s*=\s*(["']?)([^\s>]*)\1/i,' data-src="$2"'),t=i.firstChild,a(t),t.setAttribute("data-lazyload","1"),addClass(t,"lazyload"),e.parentNode.replaceChild(t,e)})},a=function(e){e.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='"+e.getAttribute("width")+"' height='"+e.getAttribute("height")+"'/%3E"},h=function(){return l&&l.length?(n&&console.log(l.length+" lazy images found"),!1):(getScrollSpeed("stop"),removeEvent(window,"scroll",o),removeEvent(window,"resize",o),l=null,n&&console.log("no more lazy images"),!0)},o=function(){clearTimeout(t),t=window.setTimeout(r,100);var e=getScrollSpeed();e&&Math.abs(e)<500&&(n&&console.log("slow scrolling: "+e),r(e))},r=function(e){if(l&&l.length){var t,i,s=[],n=0,a=window.innerHeight||document.documentElement.clientHeight,o=0,r=0;for(r=e?(o=0<e?a:0,a):(o=a/2,1.5*a);t=l[n++];)if(t.offsetParent)if(((i=t.getBoundingClientRect()).top<=o&&i.bottom>=o?0:Math.min(Math.abs(i.top-o),Math.abs(i.bottom-o)))<=r){if("DIV"===t.nodeName&&(i.top>a||i.bottom<0))continue;s.push(t)}else if(0<i.top)break;s.length&&(s.forEach(d),h())}},d=function(e){var t,i;switch(e.nodeName){case"IMG":if(i=e.getAttribute("data-inline-imageviewer"))return ImageViewer().inline(i),void(n&&console.log("started imageviewer "+i));e.onerror=e.onabort=u,s&&hasClass(e,"rml")&&(e.onload=s),e.src=e.getAttribute("data-src");break;case"IFRAME":(t=e.cloneNode()).src=e.getAttribute("data-src"),hasClass(e.parentNode,"video-container")&&(addClass(e.parentNode,"loading"),t.onload=p),e.parentNode.replaceChild(t,e),e=t;break;case"DIV":return void c(e)}n&&console.log("loaded "+e.src),removeClass(e,"lazyload")},c=function(e){if(window.BannerManager){var t=BannerManager.getTypeFromId(e.id);if(t&&hasClass(e,"lazyload")&&hasClass(e,"loading")){var i=JSON.parse(e.getAttribute("data-options")||"{}");i.lazyLoad=1,i.elementId=e.id,BannerManager.addTag(t,JSON.parse(e.getAttribute("data-formats")),i),BannerManager.displayTag(e.id),n&&console.log("loaded banner "+e.id),removeClass(e,"lazyload")}}},u=function(){var e=this.cloneNode(!0);a(this),addClass(this,"error");var t=document.createElement("span");t.className="lazyerror",this.parentNode.insertBefore(t,this),t.appendChild(this),t.appendChild(e)},p=function(){removeClass(this.parentNode,"loading")};return{init:function(e){n=jsConfig.get("debug"),i(e),l||(l=document.getElementsByClassName("lazyload")),h()||(addEvent(window,"scroll",o),addEvent(window,"resize",o),r())},initPlaceHolders:i,loadImages:r,loadBanner:c,setRmlImgOnloadFunction:function(e){s=e}}}(),getScrollSpeed=function(){var t=null,i=0,s=0,n=function(){var e=window.pageYOffset;e!=i?(s=(s+Math.abs(e-i))/2,i=e):s=0};return function(e){return"stop"==e?(clearInterval(t),t=null):t||(i=window.pageYOffset,s=0,t=setInterval(n,100)),10*s}}();